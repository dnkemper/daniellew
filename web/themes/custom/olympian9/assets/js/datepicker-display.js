"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(b,c){if(b){if("string"==typeof b)return _arrayLikeToArray(b,c);var a={}.toString.call(b).slice(8,-1);return"Object"===a&&b.constructor&&(a=b.constructor.name),"Map"===a||"Set"===a?Array.from(b):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(b,c):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(b,c){(null==c||c>b.length)&&(c=b.length);for(var d=0,f=Array(c);d<c;d++)f[d]=b[d];return f}var CONSTANTS={DOM_SELECTORS:{datePicker:"",datePickerPrevMonth:".date_picker_prev_month",datePickerNextMonth:".date_picker_next_month",datePickerMonthDays:".date_picker_month_days",datePickerMonthDay:".date_picker_month_day",datePickerYear:".date_picker_year",datePickerMonthName:".date_picker_month_name",datePickerDay:".day"},DOM_STRINGS:{dataTime:"li[data-time]"},DUMMY_LI_FOR_EMPTY_DAYS:"<li class=\"day\"></li>",DAY_MAP:{0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"},MONTH_MAP:{0:"JAN",1:"FEB",2:"MAR",3:"APR",4:"MAY",5:"JUN",6:"JUL",7:"AUG",8:"SEP",9:"OCT",10:"NOV",11:"DEC"}},utils=function(){return{prefixDOMSelectorsWithPickerSelector:function(a){var b={};for(var c in CONSTANTS.DOM_SELECTORS)b[c]="".concat(a," ").concat(CONSTANTS.DOM_SELECTORS[c]).trim();CONSTANTS.DOM_SELECTORS=b},getDOMElements:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=document.querySelector(a[c]));return b},getDatePickerWeekDaysNameMarkUp:function(){return"\n        <li>Sun</li>\n        <li>Mon</li>\n        <li>Tue</li>\n        <li>Wed</li>\n        <li>Thu</li>\n        <li>Fri</li>\n        <li>Sat</li>"},getDayMarkup:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],e=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4];c||console.trace("The time provided for getDayMarkup ".concat(c," is invalid"));var f="day";return d&&(f+=" past"),e&&(f+=" today"),"\n      <li class=\"".concat(f,"\" data-time=\"").concat(c,"\">\n        <button class=\"").concat(b?"active":"","\">").concat(a,"</button>\n      </li>")},getAllDays:function(){var a=document.querySelectorAll(CONSTANTS.DOM_SELECTORS.datePickerDay);return _toConsumableArray(null!==a&&void 0!==a?a:[])},getDaySuffix:function(a){return 1===a||21===a||31===a?"st":2===a||22===a?"nd":3===a||23===a?"rd":"th"}}}(),model=function(){var a={currentDate:new Date,selectedDate:new Date};return{setCurrentDate:function(b){a.currentDate=b},setSelectedDate:function(b){a.selectedDate=b},getCurrentDate:function(){return a.currentDate},getSelectedDate:function(){return a.selectedDate}}}(),view=function(a,b){document.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("dateDisplay"),b=document.getElementById("copyButton");b.addEventListener("click",function(){var b=a.textContent,c=new Date(b);if(!isNaN(c.getTime())){var d=document.createElement("input");d.value=b,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),console.log("Datetime copied to clipboard:",c)}else console.error("Invalid datetime format:",b)})});var c=document.getElementById("dateDisplay"),d=c.textContent,e=document.getElementById("dateDisplay").textContent;return Drupal.behaviors.myCustomBehavior={attach:function(){Drupal.theme.setVariable("dateDisplay",e)}},{removeDays:function(){var a=b.getAllDays();a.forEach(function(a){return a.remove()})},fillEmptyDays:function(a){for(var c=b.getDOMElements(CONSTANTS.DOM_SELECTORS),d=0;d<a;d++)c.datePickerMonthDays.insertAdjacentHTML("beforeend",CONSTANTS.DUMMY_LI_FOR_EMPTY_DAYS)},fillDay:function(a){var c=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],d=2<arguments.length?arguments[2]:void 0,e=b.getDayMarkup(a,c,d),f=b.getDOMElements(CONSTANTS.DOM_SELECTORS);f.datePickerMonthDays.insertAdjacentHTML("beforeend",e)},fillCurrentMonth:function(a){var c=b.getDOMElements(CONSTANTS.DOM_SELECTORS);c.datePickerMonthName.textContent=a},fillSelectedDate:function(a,c,d){var e=b.getDOMElements(CONSTANTS.DOM_SELECTORS),f="".concat(d).concat((a+1).toString().padStart(2,"0")).concat(c.toString().padStart(2,"0"));e.datePickerMonthDay.textContent=f;var g=document.getElementById("dateDisplay");if(g){g.textContent=f;var h=g.nextElementSibling;if(h){h.textContent=f}}}}}(model,utils),controller=function(a,b,c){function d(b){var c,d=null===(c=b.target.closest(CONSTANTS.DOM_STRINGS.dataTime))||void 0===c?void 0:c.dataset.time;if(d){var e=a.getSelectedDate(),f=new Date(+d);if(e&&e.getDate()===f.getDate()&&e.getMonth()===f.getMonth()&&e.getFullYear()===f.getFullYear())a.setSelectedDate(null),window.location.hash="";else{a.setSelectedDate(f);var h="".concat(f.getFullYear()).concat(f.getMonth()+1).concat(f.getDate());window.location.hash=h}a.setCurrentDate(f),g()}}function e(){g()}function f(){var b=new Date(a.getCurrentDate().getTime());b.setMonth(b.getMonth()-2),a.setCurrentDate(b),g()}function g(){var c,d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;h(),b.removeDays();var e=new Date(null!==(c=null===d||void 0===d?void 0:d.getTime())&&void 0!==c?c:a.getCurrentDate().getTime()),f=a.getSelectedDate(),g=f.getDate(),i=f.getMonth(),j=f.getFullYear(),k=new Date;e.setDate(1);var l=e.getMonth();for(b.fillEmptyDays(e.getDay()),b.fillCurrentMonth("".concat(CONSTANTS.MONTH_MAP[l]," - ").concat(e.getFullYear()));e.getMonth()===l;){var m=e.getMonth(),n=e.getDate(),o=e.getFullYear(),p=e<k,q="".concat(o,"-").concat((m+1).toString().padStart(2,"0"),"-").concat(n.toString().padStart(2,"0")),r="".concat(j,"-").concat((i+1).toString().padStart(2,"0"),"-").concat(g.toString().padStart(2,"0"));b.fillDay(n,r===q,e.getTime(),p?"past":q===k.toISOString().split("T")[0]?"today":""),e.setDate(n+1)}a.setCurrentDate(e)}function h(){var c=new Date(a.getSelectedDate().getTime());b.fillSelectedDate(c.getMonth(),c.getDate(),c.getFullYear())}var i=null;return{init:function b(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Date;if(c.prefixDOMSelectorsWithPickerSelector(h),i=c.getDOMElements(CONSTANTS.DOM_SELECTORS),!i.datePicker)throw new Error("Date Picker with selector ".concat(h," not found in the document"));if(i.datePickerNextMonth.addEventListener("click",e),i.datePickerPrevMonth.addEventListener("click",f),i.datePickerMonthDays.addEventListener("click",d),j.constructor!==Date)throw new Error("The initial date ".concat(j," is not a Date Object"));var k=new Date(j.getTime()),l=new Date(j.getTime());a.setSelectedDate(k),a.setCurrentDate(l),g(j)}}}(model,view,utils);controller.init("#date_picker_1");
//# sourceMappingURL=datepicker-display.js.map