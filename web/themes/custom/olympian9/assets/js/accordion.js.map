{"version":3,"file":"accordion.js","names":["Accordion","element","b","thisAccordion","accordions","getElementsByClassName","multiSelectible","getAttribute","d","c","a","itemComponents","accordionItemComponents","i","expanded","isAccordionOpen","btn","panel","hidden","onclick","toggleAccordion","length","e","window","addEventListener","event","activateAccordionByHash","prototype","accordion","querySelector","nextElementSibling","accordionOpen","isOpen","setAttribute","activateAccordion","collapseAllAccordions","hash","location","substr","accordionToFocus","document","getElementById","accordionToFocusAccordionWrapper","parentElement","accordionWrapper","historyString","id","history","pushState","replaceState"],"sources":["../../js/accordion.js"],"sourcesContent":["(function () {\n  function Accordion(element) {\n    let thisAccordion = this;\n\n    // Get the accordions, and if the accordion group is multiselectable.\n    this.accordions = element.getElementsByClassName(\"accordion__heading\");\n    this.multiSelectible = element.getAttribute('aria-multiselectable') === 'true' || false;\n\n    // For each of the accordions...\n    for (let i = 0; i < this.accordions.length; i++) {\n\n      // Get the accordion item's components.\n      let itemComponents = this.accordionItemComponents(this.accordions[i]);\n\n      // Check if the accordion is currently expanded at moment of click.\n      let expanded = this.isAccordionOpen(itemComponents.btn);\n\n      // If it is, un-hide its corresponding panel.\n      itemComponents.panel.hidden = !expanded;\n\n      // When the accordion's button is clicked...\n      itemComponents.btn.onclick = () => {\n\n        // Toggle the corresponding accordion.\n        this.toggleAccordion(this.accordions[i]);\n      }\n    }\n\n    // Add a listener that listens for when the URL is changed.\n    window.addEventListener('popstate', function (event) {\n\n      // Activate an accordion based upon the hash parameters in the URL.\n      thisAccordion.activateAccordionByHash();\n    });\n\n    // Activate any accordion that is defined in the hash parameter if there is one.\n    this.activateAccordionByHash();\n  }\n\n  // Gets the item components for 'accordion'.\n  // Returns an object that contains 'btn' and 'panel' elements.\n  Accordion.prototype.accordionItemComponents = function (accordion) {\n    let btn = accordion.querySelector('button');\n    let panel = accordion.nextElementSibling;\n\n    return {\n      'btn': btn,\n      'panel': panel\n    }\n  }\n\n  // Define whether 'accordion' is open with 'isOpen'.\n  Accordion.prototype.accordionOpen = function (accordion, isOpen) {\n    // Get the accordion item's components.\n    let itemComponents = this.accordionItemComponents(accordion);\n\n    // Set the relevant attributes for 'accordion' based on 'isOpen'.\n    itemComponents.btn.setAttribute('aria-expanded', isOpen);\n    itemComponents.btn.setAttribute('aria-selected', isOpen);\n    itemComponents.panel.hidden = !isOpen;\n  }\n\n  // Activate an 'accordion'.\n  Accordion.prototype.activateAccordion = function (accordion) {\n\n    // Checks if multiple accordions can be open at once. If not, closes other accordions.\n    if (!this.multiSelectible) {\n      this.collapseAllAccordions();\n    }\n\n    // Open the accordion.\n    this.accordionOpen(accordion, true);\n  }\n\n  // Activate any accordion that is defined in the hash parameter if there is one.\n  Accordion.prototype.activateAccordionByHash = function () {\n\n    // Get the hash parameter.\n    let hash = window.location.hash.substr(1);\n\n    // If the hash parameter is not empty...\n    if (hash !== '') {\n\n      // Get the accordion to focus.\n      let accordionToFocus = document.getElementById(hash);\n\n      // If the defined hash parameter finds an element...\n      if (accordionToFocus !== null) {\n\n        // Get the accordion wrapper of the hash parameter and this accordion wrapper to compare later.\n        let accordionToFocusAccordionWrapper = accordionToFocus.parentElement\n        let accordionWrapper = this.accordions[0].parentElement;\n\n        // If the accordion wrapper defined by the hash and this accordion wrapper are the same...\n        if (accordionToFocusAccordionWrapper === accordionWrapper) {\n\n          // Activate the accordion defined in the hash parameters.\n          this.activateAccordion(accordionToFocus);\n        }\n      }\n    }\n  }\n\n  // Collapse all accordions in this accordion group.\n  Accordion.prototype.collapseAllAccordions = function () {\n\n    // For each accordion...\n    for (let i = 0; i < this.accordions.length; i++) {\n\n      // Close it.\n      this.accordionOpen(this.accordions[i], false);\n    }\n  }\n\n  // Check if an accordion is open by inspecting the aria attribute of the 'btn' controlling it.\n  // Returns a boolean.\n  Accordion.prototype.isAccordionOpen = function (btn) {\n    return btn.getAttribute('aria-expanded') === 'true' || false;\n  }\n\n  // Toggle a specific 'accordion' open or closed.\n  Accordion.prototype.toggleAccordion = function (accordion) {\n    // Get the accordion's button element.\n    let btn = accordion.querySelector('button');\n\n    // Check if the accordion is currently expanded at moment of click.\n    let expanded = this.isAccordionOpen(btn);\n\n    // Checks if multiple accordions can be open at once. If not, closes other accordions.\n    if (!this.multiSelectible && !expanded) {\n      this.collapseAllAccordions();\n    }\n\n    // Toggle the accordion.\n    this.accordionOpen(accordion, !expanded)\n\n    // If the accordion is not open (but will be)...\n    if (!expanded) {\n\n      // Define historyString here to be used later.\n      let historyString = '#' + btn.parentElement.id;\n\n      // Change window location to add URL params\n      if (window.history && history.pushState && historyString !== '#') {\n        // NOTE: doesn't take into account existing params\n        history.replaceState(\"\", \"\", historyString);\n      }\n    }\n\n    // Else if the accordion is closed...\n    else {\n\n      // Empty the history string.\n      history.replaceState(\"\", \"\", \" \");\n    }\n  }\n\n  // Instantiate accordions on the page.\n  const accordions = document.getElementsByClassName(\"accordion\");\n\n  for (let i = 0; i < accordions.length; i++) {\n    let accordion = new Accordion(accordions[i]);\n  }\n}());\n\n"],"mappings":"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","ignoreList":[]}