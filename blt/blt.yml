behat:
  config: '${repo.root}/tests/behat/local.yml'
  profile: local
  paths:
    - '${repo.root}/tests/behat'
  tags: '~ajax&&~experimental'
  extra: ''
  validate: true
  web-driver: chrome
bin.path: vendor/bin
blt:
  update:
    ignore-existing-file: '${blt.root}/scripts/blt/ignore-existing.txt'
  config-files:
    project: '${repo.root}/blt/blt.yml'
    local: '${repo.root}/blt/local.blt.yml'
    example-local: '${repo.root}/blt/example.local.blt.yml'
    schema-version: '${repo.root}/blt/.schema_version'
  command-cache-dir: '${blt.root}/cache/commands'
  alias:
    auto-install: true
composer:
  bin: '${repo.root}/${bin.path}'
  extra: ''
cm:
  core:
    install_from_config: true
  strategy: none
deploy:
  build-dependencies: true
  dir: '${tmp.dir}/blt-deploy'
  docroot: '${deploy.dir}/web'
  exclude_file: '${repo.root}/scripts/blt/deploy/deploy-exclude.txt'
  exclude_additions_file: '${repo.root}/blt/deploy-exclude-additions.txt'
  gitignore_file: '${repo.root}/scripts/blt/deploy/.gitignore'
docroot: '${repo.root}/web'
drupal:
  account:
    mail: artsci-webteam@wustl.edu
    name: asdrupal
  site.mail: '${drupal.account.mail}'
  locale: en
  local_settings_file: '${docroot}/sites/${site}/settings/local.settings.php'
  settings_file: '${docroot}/sites/${site}/settings.php'
  db:
    database: db
    username: db
    password: db
    host: db
    port: 3306
  d7:
    database: d7
    username: db
    password: db
    host: db
    port: 3306
drush:
  aliases:
    ci: self
  ansi: true
  bin: '${composer.bin}/drush'
  default_alias: self
  dir: '${docroot}'
  sanitize: true
git:
  default_branch: main
  remotes:
    - 'https://github.com/artsci-webteam/deps.git'
  hooks:
    commit-msg: false
    pre-commit: false
phpcs:
  standard: 'Drupal,DrupalPractice'
phpcbf:
  filesets:
    - files.php.custom.modules
    - files.php.tests
    - files.php.custom.themes
    - files.frontend.custom.themes
project:
  human_name: artsci
  local: {  }
  profile:
    name: artsci
setup:
  strategy: install
  dump-file: null
  install-args: install_configure_form.enable_update_status_module=NULL
command-hooks:
  frontend-reqs:
    dir: '${docroot}'
    command: 'yarn install --production --ignore-optional --frozen-lockfile --non-interactive'
  frontend-assets:
    dir: '${docroot}'
    command: 'yarn workspaces run build'
  frontend-test:
    dir: '${docroot}'
    command: null
  pre-commit:
    dir: '${docroot}'
    command: null
  pre-config-import:
    dir: '${docroot}'
    command: null
  post-deploy-build:
    dir: '${repo.root}'
    command: './vendor/bin/blt artsci:post:build'
  post-setup-build:
    dir: '${docroot}'
    command: null
  post-deploy:
    dir: '${docroot}'
    command: null
  db:
    host: db
    username: root
    password: root
    test-runner: phpunit
    sudo-run-tests: true
    web-driver: chrome
    sqlite: '${repo.root}/tmp/test.sqlite'
    browsertest-output-directory: browser_output
    chrome-args: '--disable:-gpu --headless --no-sandbox'
    simpletest-base-url: '${project.local.protocol}://${project.local.hostname}'
    simpletest-db: 'sqlite://localhost/${tests.drupal.sqlite}'
    symfony-deprecations-helper: disabled
tests:
  phpunit:
    - { config: '${repo.root}' }
validate:
  deprecated:
    filesets: [files.php.custom.modules]
  yaml:
    filesets: [files.yaml]
  lint:
    filesets: [files.php.custom.modules, files.php.custom.themes, files.php.tests, files.php.multisites]
  twig:
    functions: [drupal_image, drupal_title, drupal_entity]
    filters: [image_style, smart_date_format]
vm:
  enable: false
  config: '${repo.root}/box/config.yml'
blt-in-vm: false
artsci:
  applications:
    dev: artscidev.wustl.edu
    stage: artscistage.wustl.edu
    prod: artsciprod.wustl.edu
sync:
  public-files: true
  private-files: false
  commands:
    - 'drupal:sync:db'
    - 'drupal:update'
    - 'artsci:multisite:noop'
    - 'artsci:multisite:noop'
    - 'artsci:multisite:noop'
    - 'source:build:frontend'
